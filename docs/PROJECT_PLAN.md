# 1 项目计划

## 1.1 可行性分析

### 1.1.1 技术可行性分析

**1. 技术架构成熟度**

DietAI 项目采用成熟、主流的技术栈，技术风险可控：

| 技术层面 | 技术选型 | 成熟度评估 |
|---------|---------|-----------|
| 后端框架 | FastAPI + Python 3.12 | ★★★★★ 高度成熟，异步性能优异 |
| 数据库 | PostgreSQL 15 | ★★★★★ 企业级数据库，稳定可靠 |
| 缓存层 | Redis 7 | ★★★★★ 业界标准缓存方案 |
| 对象存储 | MinIO (S3 兼容) | ★★★★☆ 开源存储方案，生态完善 |
| 前端框架 | Flutter 3.x | ★★★★☆ 跨平台开发效率高 |
| AI 编排 | LangGraph + LangChain | ★★★★☆ AI 应用主流框架 |
| 向量数据库 | ChromaDB | ★★★★☆ 轻量级 RAG 方案 |

**2. AI 能力可行性**

- **多模态视觉分析**：项目支持 OpenAI GPT-4V、Anthropic Claude、阿里云通义千问等多种视觉模型，通过 `configuration.py` 实现灵活切换，保障服务连续性
- **RAG 知识检索**：基于 ChromaDB 构建营养知识库，实现检索增强生成（RAG），提升回答专业性
- **结构化输出**：通过 Pydantic 模型定义 `NutritionAnalysis`、`NutritionAdvice` 等结构化输出，保证数据一致性

**3. 核心技术实现验证**

| 功能模块 | 技术实现 | 验证状态 |
|---------|---------|---------|
| 食物图像识别 | LangGraph nutrition_agent 工作流 | ✅ 已实现 |
| 营养成分提取 | 视觉模型 + 结构化输出 | ✅ 已实现 |
| 个性化建议 | RAG + 用户健康档案 | ✅ 已实现 |
| 实时对话 | SSE 流式响应 + chat_agent | ✅ 已实现 |
| 用户健康管理 | 完整的数据模型设计 | ✅ 已实现 |

**4. 技术可行性结论**

项目技术选型合理，核心功能已完成验证性开发，AI 模型具备多供应商冗余能力，技术可行性**高**。

---

### 1.1.2 资源可行性分析

**1. 硬件资源需求**

| 资源类型 | 开发阶段 | 生产部署 |
|---------|---------|---------|
| 服务器 | 本地开发环境 | 云服务器 2核4G 起步 |
| 存储 | 本地 Docker 卷 | MinIO 集群或云对象存储 |
| GPU | 无需（调用云端 API） | 无需（调用云端 API） |

**2. 软件资源需求**

| 资源类型 | 方案 | 成本估算 |
|---------|-----|---------|
| LLM API | OpenAI / Anthropic / 阿里云 | 按调用量计费，约 ￥0.05-0.5/次分析 |
| 数据库 | PostgreSQL（开源） | 免费 |
| 缓存 | Redis（开源） | 免费 |
| 对象存储 | MinIO（开源）/ 云 OSS | 云存储约 ￥0.12/GB/月 |

**3. 人力资源需求**

| 角色 | 人数 | 职责 |
|-----|-----|-----|
| 后端开发 | 1-2 人 | FastAPI 后端、数据库设计、API 开发 |
| AI 工程师 | 1 人 | LangGraph Agent 开发、Prompt 优化 |
| 前端/移动端开发 | 1-2 人 | Flutter 跨平台应用开发 |
| 产品/UI 设计 | 1 人 | 产品设计、用户体验优化 |
| **总计** | **4-6 人** | 小型敏捷团队配置 |

**4. 资源可行性结论**

- 项目采用云端 AI API 调用模式，无需自建 GPU 集群，降低硬件门槛
- 技术栈以开源组件为主，软件成本可控
- 团队规模 4-6 人即可支撑完整开发周期
- 资源可行性**高**

---

### 1.1.3 市场可行性分析

**1. 市场规模与趋势**

- **健康管理市场**：2025年中国健康管理市场规模预计超过 1.5 万亿元，年增长率 15%+
- **AI+健康赛道**：AI 健康应用市场快速增长，饮食管理是核心细分领域
- **用户需求**：健康意识提升，对科学饮食、营养管理需求旺盛

**2. 竞品分析**

| 竞品 | 核心功能 | 优势 | 不足 |
|-----|---------|-----|-----|
| 薄荷健康 | 食物数据库 + 卡路里记录 | 用户基数大，数据丰富 | 依赖手动输入，缺乏 AI 分析 |
| MyFitnessPal | 营养追踪 + 社区 | 国际化，数据库完善 | 中文支持弱，食物识别不准 |
| Keep | 运动 + 轻量饮食 | 运动生态完整 | 饮食功能偏弱 |

**3. DietAI 差异化竞争力**

| 差异化特性 | 竞争优势 |
|-----------|---------|
| **AI 图像识别** | 拍照即分析，无需手动输入，降低使用门槛 |
| **多维营养分析** | 覆盖宏量营养素、微量元素、维生素等全面分析 |
| **个性化建议** | 结合用户健康档案（疾病、过敏、目标）生成定制建议 |
| **RAG 知识增强** | 基于专业营养知识库，提供科学可靠的饮食指导 |
| **智能对话** | 支持自然语言交互，实时解答营养问题 |

**4. 目标用户群体**

- **健身人群**：需要精确控制营养摄入，追求增肌/减脂目标
- **慢病管理人群**：糖尿病、高血压等需要饮食控制的患者
- **健康意识人群**：追求健康生活方式的都市白领
- **减重需求人群**：需要科学减脂的用户群体

**5. 市场可行性结论**

- 市场空间大，增长趋势明确
- 现有竞品在 AI 能力上存在明显短板
- DietAI 的 AI 驱动模式具备差异化竞争力
- 市场可行性**高**

---

## 1.2 排期规划

### 1.2.1 项目开发阶段划分

基于参赛时间节点，项目分为四个阶段：

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        DietAI 项目开发排期                               │
├─────────────┬─────────────┬─────────────┬─────────────┬────────────────┤
│   第一阶段   │   第二阶段   │   第三阶段   │   第四阶段   │    参赛提交    │
│  需求与设计  │  核心开发    │  功能完善    │  测试优化    │               │
│   (2周)     │   (4周)     │   (3周)     │   (2周)     │               │
├─────────────┴─────────────┴─────────────┴─────────────┴────────────────┤
│  Week 1-2    Week 3-6      Week 7-9      Week 10-11      Week 12       │
└─────────────────────────────────────────────────────────────────────────┘
```

### 1.2.2 各阶段详细任务

**第一阶段：需求分析与系统设计（第 1-2 周）**

| 任务 | 负责人 | 交付物 |
|-----|-------|-------|
| 需求分析与 PRD 编写 | 产品经理 | 产品需求文档 |
| 技术架构设计 | 后端 + AI 工程师 | 架构设计文档 |
| 数据库模型设计 | 后端开发 | ER 图 + 迁移脚本 |
| UI/UX 设计 | 设计师 | 原型图 + 设计稿 |
| AI Agent 工作流设计 | AI 工程师 | Agent 流程图 |

**第二阶段：核心功能开发（第 3-6 周）**

| 任务 | 负责人 | 交付物 |
|-----|-------|-------|
| 用户认证模块 | 后端开发 | auth_router 完整实现 |
| 用户健康档案模块 | 后端开发 | user_router 完整实现 |
| 食物分析 AI Agent | AI 工程师 | nutrition_agent 优化 |
| 食物记录与营养分析 | 后端 + AI | food_router 完整实现 |
| 智能对话 Agent | AI 工程师 | chat_agent 优化 |
| Flutter 基础框架搭建 | 前端开发 | 路由、状态管理、网络层 |
| 核心页面开发 | 前端开发 | 登录、首页、拍照分析页 |

**第三阶段：功能完善与集成（第 7-9 周）**

| 任务 | 负责人 | 交付物 |
|-----|-------|-------|
| 营养知识库 RAG | AI 工程师 | ChromaDB 知识库 |
| 每日营养汇总功能 | 后端开发 | 营养统计 API |
| 健康趋势分析 | 后端 + 前端 | 趋势图表功能 |
| 对话页面开发 | 前端开发 | 聊天界面 + SSE 集成 |
| 个人中心页面 | 前端开发 | 用户档案管理页面 |
| 前后端联调 | 全员 | 接口联调完成 |

**第四阶段：测试优化与上线准备（第 10-11 周）**

| 任务 | 负责人 | 交付物 |
|-----|-------|-------|
| 单元测试编写 | 后端 + 前端 | 测试覆盖率 >80% |
| 集成测试 | 全员 | 端到端测试通过 |
| 性能优化 | 后端 + AI | 响应时间 <3s |
| Bug 修复 | 全员 | Bug 清零 |
| 文档完善 | 全员 | 用户手册、技术文档 |
| 部署上线 | 后端开发 | 生产环境部署完成 |

### 1.2.3 团队分工矩阵

| 成员角色 | 第一阶段 | 第二阶段 | 第三阶段 | 第四阶段 |
|---------|---------|---------|---------|---------|
| **后端开发** | 架构设计、DB 设计 | 认证、用户、食物模块 | 营养汇总、趋势分析 | 测试、优化、部署 |
| **AI 工程师** | Agent 工作流设计 | nutrition/chat Agent | RAG 知识库 | Prompt 优化、测试 |
| **前端开发** | 技术选型 | 框架搭建、核心页面 | 全部页面、联调 | UI 优化、测试 |
| **产品/设计** | 需求分析、UI 设计 | 交互细化 | 体验优化 | 文档、演示准备 |

### 1.2.4 关键里程碑

| 里程碑 | 时间节点 | 验收标准 |
|-------|---------|---------|
| M1: 设计评审通过 | 第 2 周末 | 需求文档、架构设计评审通过 |
| M2: 核心功能可演示 | 第 6 周末 | 拍照分析、营养展示流程跑通 |
| M3: 功能完整版 | 第 9 周末 | 全部功能开发完成，联调通过 |
| M4: 参赛提交版 | 第 11 周末 | 测试通过，文档齐全，可提交参赛 |

### 1.2.5 风险控制

| 风险点 | 应对措施 |
|-------|---------|
| AI API 调用延迟 | 实现多模型切换、增加缓存、优化 Prompt |
| 食物识别准确率不足 | 准备 fallback 方案（手动修正）、持续优化 Prompt |
| 前后端进度不同步 | 提前约定 API 契约、Mock 数据并行开发 |
| 跨平台兼容性问题 | 优先保证单平台（Web/Android），渐进支持其他平台 |
